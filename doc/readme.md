# RhythKey Pro 使用手册

## 控制器外壳的 3D 打印

打开 `case/` 目录，下载两个以 `.stl` 后缀结尾的文件，它们是控制器的外壳模型文件，可以联系拥有 3D 打印机的朋友或者互联网上的付费 3D 模型打印服务进行打印。

## PCB 的打印

您可以使用 [嘉立创EDA Pro](https://pro.lceda.cn/) 登录账号并导入位于 `/pcb` 目录中的 `.epro` 格式文件，并进行 Gerber 文件的导出，然后前往嘉立创在线 PCB 下单服务进行 PCB 的打印。

或者如果您不需要对 PCB 进行审阅或修改，也可以直接前往 [Releases](https://github.com/pStrikeZ/RhythKeyPro/releases) 进行 Gerber 文件的下载。

推荐选择白色的 PCB 以使电路板正面的丝印更加美观。

注意：由于我在绘制 PCB 的时候使用了一些没有电气信息的封装，所以 EDA 中的电气原理图功能不具备参考价值。

## BOM 配件采购

首先，您需要购买用于 BOM 的电子元件，这些元件的清单如下，大概分为两类，一类是 `必购配件`，一类是 `可选配件`，但是推荐所有的配件全部都购买并组装。

### 必购配件

* 1x [Sparkfun Arduino Pro Micro](https://www.sparkfun.com/pro-micro-3-3v-8mhz.html)  
也可以是其他厂商生产的兼容版本，只要是搭载 ATMega32U4 主控芯片的模块就可以了。  
切勿购买使用 Mini-USB 接口的版本，其 PCB 尺寸和我们的 PCB 不符，~~而且我相信您应该很难在2025年找到一根那样的数据线~~  
推荐购买预先焊接好插针的版本，使用方便快捷。
* 12x 您喜欢的五脚机械键盘轴体  
我在改良设计这款音游控制器的时候，有朋友询问过我能不能使用光轴或者静电容轴来提升其在音游场景下的绝对游玩体验。  
遗憾的是，答案是不能，光轴或静电容轴的触发力度 / 键程调节功能不是一位在校学生可以在不借助任何专业调校设备的帮助下使用基于 Arduino 的主控方案实现的。
* 12x 凯华机械键盘轴座
* 8x 1U 尺寸的机械键盘键帽和 4x 2.75U 尺寸的机械键盘键帽
* 4x 2U 尺寸的机械键盘卫星轴  
在大多数时候您应该会被店家捆绑销售一根适用于机械键盘空格键的 6.5U 或者 7U 长度的卫星轴，这是正常现象。
* 2x ALPS EC11 系列旋转电位器以及2个电位器旋钮帽  
由 ALPS 品牌原装进口的 EC11 电位器有两个版本，分别是带有刻度的 `EC11E09244BS` 和不带刻度的 `EC11E1834403`。  
两种版本的电位器我都有采购，强烈推荐购买不带刻度的 `EC11E1834403` 型号电位器，因为带刻度的电位器每旋转一格就会有强烈的段落感，在游玩需要拧动旋钮的音游（ SOUND VOLTEX ）时会有非常强烈的违和感。  
从日本原装进口的 EC11 系列电位器价格非常高昂，您可以购买成本低廉的国产平替型 EC11 电位器，但是我无法保证使用这类第三方电位器时的游玩体验。  
在购买电位器旋钮帽的时候请确保旋钮帽内部的形状一致。
* 1x ALPS B10K 75mm 滑动电位器以及1个滑动电位器推子帽  
您同样可以购买国产平替版本的 B10K 75mm 滑动电位器，但是我无法保证使用这类第三方电位器时的游玩体验。
* 7x 6mm*6mm 贴片按键式轻触开关，按键高度 7.5mm
* 4x R0805 10KΩ 贴片电阻
* 16x R0805 100nF 贴片电容
* 1x R0805 330Ω 贴片电阻
* 12x R0805 1Ω 贴片电阻
* 12x WS2812 反贴 RGB LED 灯珠  
务必购买反贴版本的灯珠，否则将无法焊接到 PCB 上。
* 18x R1206 1N4148 反冲二极管
* 3x 1N4007 SMA 二极管
* 6x M2*8 自攻螺丝
* 5x M2*16 自攻螺丝
* 可以调整温度的电烙铁，焊锡丝，焊油，松香，**以及一把弯头尖嘴镊子**  
*或者如果您拥有热风枪的话，也许可以试试回流焊？*

### 可选配件

* 2x 2.54mm 直插单排母排针母座  
如果您不考虑模块的可插拔特性，可以直接将模块焊死在主板上，虽然我不推荐您这么做。
* 6x 6mm 厚度的橡胶脚垫  
在使用排针插座连接 Arduino 模块时，模块的高度会超出 3D 打印件的厚度，所以需要几个脚垫将其垫高，旋钮侧垫高 12mm ，用户侧垫高 6mm 即可。
* 12x 机械轴的轴下垫  
主要是我真不觉得几片泡沫能改变以 3D 打印的材料为外壳的音游控制器的按键听感到什么地步，那么还不如什么都不贴。

## 焊接

除了位于主板正面的 6 个贴片轻触开关以外，所有的贴片电子元件全部都被设计在了主板的背面，丝印直接指示元器件型号，对号入座即可。  
如果您购买的 Arduino 模块自带了 RESET 按钮，您可以选择留空主板背面的 RESET 轻触开关焊盘。  
先完成背面的贴片元件焊接之后，再焊接电位器、正面的贴片开关、排针母座等部件。  
完成的电路板应该如下图所示，**虽然图中的 PCB 是曾经的 Prototype 版本，和仓库中的 PCB 不一致**：

![](img/photo_2025-09-07_23-01-35.jpg)

![](img/photo_2025-09-07_23-01-37.jpg)

## 组装

外壳模型需要进行修改，轴体开槽1.5mm厚，WIP

* 将卫星轴嵌入到上盖当中
* 将 PCB 放置在底壳中，拧上 M2*8 的自攻螺丝
* 将顶壳放置在底壳上，拧上 M2*16 的自攻螺丝
* 安装机械轴、旋钮帽、电位器帽、键帽  
如果觉得电位器帽在电位器上面很松动，可以在电位器帽里面塞一张小纸片，这会增大电位器帽与电位器的摩擦力。

完成组装的产品如图所示：

![](img/photo_2025-09-07_21-05-48.jpg)

## 固件烧录

WIP

## 游戏设置

**免责声明**：本项目不提供任何游戏的安装文件及游戏自身的使用教程。

### 音击

打开 `segatools.ini` ，调整好其他设置，滚动到配置文件的末尾。

```ini
[io4]
enable=1
; Test button virtual-key code. Default is the F1 key.
test=0x70
; Service button virtual-key code. Default is the F2 key.
service=0x71
; Keyboard button to increment coin counter. Default is the F3 key.
coin=0x72

; Set "1" to enable mouse lever emulation, "0" to use XInput
mouse=0
```

将 `mouse` 项更改为 `0` ，然后启动游戏，按 `F1` 进入测试模式，选择 `レバー設定` 并进入。

![](img/A0AC07B9-7E17-4014-87DB-FF74D8B1B509.png)

![](img/F37B6166-CD39-4C0E-A306-2C2299E3DFFE.png)

先选择 `初期設定に戻す` ，然后缓慢地移动电位器到最左端，再移动到最右端。  
接下来选择 `終了` ，然后 `保存する` ，完成其他需要的设置后退出测试模式，开始享受游戏。

### SOUND VOLTEX

运行 `spicecfg.exe` 或者在进入游戏后按 `F4` 按钮，打开 spicetools 的设置界面。

![](img/69BDBD09-95C8-41A5-897E-45F3F30AEDA7.png)

按照图中的方式逐个点击 `Bind` 按钮，然后按下控制器上对应的按键进行绑定。  
绑定完按键后切换到 `Analogs` 选项卡。

![](img/5417F45D-8848-4352-8696-1087133996B3.png)

将两个旋钮分别绑定到控制器的摇杆 `X` 轴和 `Rx` 轴上，并启用 `Smooth Axis` ，然后退出设置，开始享受游戏。

> **注意**：在游戏中，可以按下右下角的功能按键，灯效会从默认的音击配色变更为白色灯光，然后 **侧键与菜单键会被屏蔽**，以防止游戏过程中误触。

### DJMAX RESPECT V

直接进入游戏，进入设置 -> 控制 -> 输入设置 -> 编辑。

![](img/9A561E22-5F77-403A-9E1D-07CB06490577.png)

设置好按键映射之后直接开始享受游戏。

> **注意**：在游戏中，可以按下右下角的功能按键，灯效会从默认的音击配色变更为白色灯光，然后 **侧键与菜单键会被屏蔽**，以防止游戏过程中误触。

### osu

使用类似 DJMAX 的方式设置按键映射后即可开始享受游戏。
